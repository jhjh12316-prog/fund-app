<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>持仓记录</title>

<style>
body {
  margin: 0;
  padding: 20px;
  background: #0f1116;
  color: #fff;
  font-family: -apple-system, BlinkMacSystemFont;
}
.card {
  background: #1a1d25;
  border-radius: 12px;
  padding: 16px;
  margin-bottom: 16px;
}
input, button {
  padding: 10px;
  border-radius: 8px;
  border: none;
  margin-right: 8px;
}
button {
  background: #6c6cff;
  color: #fff;
}
.item {
  padding: 8px 0;
  border-bottom: 1px solid #2a2d36;
}
</style>
</head>

<body>

<div class="card">
  <h2>我的持仓</h2>
  <input id="code" placeholder="基金代码">
  <input id="amount" placeholder="金额">
  <button id="addBtn">添加</button>
</div>

<div class="card">
  <h3>搜索</h3>
  <input id="search" placeholder="输入代码搜索">
</div>

<div class="card">
  <h3>持仓列表</h3>
  <div id="list"></div>
</div>

<script>
const listEl = document.getElementById("list");
const codeEl = document.getElementById("code");
const amountEl = document.getElementById("amount");
const searchEl = document.getElementById("search");

let data = JSON.parse(localStorage.getItem("holdings") || "[]");

function render(filter = "") {
  listEl.innerHTML = "";
  data
    .filter(i => i.code.includes(filter))
    .forEach(i => {
      const div = document.createElement("div");
      div.className = "item";
      div.textContent = `${i.code} ｜ ${i.amount}`;
      listEl.appendChild(div);
    });
}

document.getElementById("addBtn").onclick = () => {
  const code = codeEl.value.trim();
  const amount = amountEl.value.trim();
  if (!code || !amount) {
    alert("别空着，浏览器不是算命的");
    return;
  }
  data.push({ code, amount });
  localStorage.setItem("holdings", JSON.stringify(data));
  codeEl.value = "";
  amountEl.value = "";
  render(searchEl.value.trim());
};

searchEl.oninput = () => {
  render(searchEl.value.trim());
};

render();
</script>

</body>
</html>
